<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="theme-color" content="#0a0c10">
  <meta name="color-scheme" content="dark">
  <title>ClawCondos v2</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,520;9..144,720&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/v2/styles.css">
  <link rel="stylesheet" href="/v2/agents.css">
  <link rel="stylesheet" href="/v2/dashboard-overrides.css">
  <link rel="stylesheet" href="/styles/media-upload.css">
  <link rel="stylesheet" href="/styles/voice-recorder.css">
</head>
<body>
  <div class="toast-container" id="toastContainer"></div>

  <div class="modal-overlay hidden" id="loginModal">
    <div class="modal">
      <h2 class="modal-title">üèôÔ∏è ClawCondos</h2>
      <p class="modal-desc">Enter your OpenClaw gateway password/token to connect.</p>
      <div class="form-group">
        <label class="form-label">Password / Token</label>
        <input type="password" class="form-input" id="loginPassword" placeholder="Gateway password or token" onkeypress="if(event.key==='Enter')doLogin()">
      </div>
      <button class="form-btn" onclick="doLogin()">Connect</button>
      <div class="form-error" id="loginError"></div>
    </div>
  </div>

  <div class="modal-overlay hidden" id="createGoalModal">
    <div class="modal">
      <h2 class="modal-title">New Goal</h2>
      <p class="modal-desc">Create a new goal inside this condo.</p>
      <div class="form-group">
        <label class="form-label">Title</label>
        <input type="text" class="form-input" id="createGoalTitle" placeholder="e.g., Rebrand Dashboard" onkeypress="if(event.key==='Enter')createGoal()">
      </div>
      <div class="form-group">
        <label class="form-label">Deadline (optional)</label>
        <input type="text" class="form-input" id="createGoalDeadline" placeholder="YYYY-MM-DD or freeform">
      </div>
      <div style="display:flex; gap:10px; margin-top: 10px;">
        <button class="form-btn" onclick="createGoal()">Create</button>
        <button class="form-btn" style="background: var(--bg-input); border: 1px solid var(--border);" onclick="hideCreateGoalModal()">Cancel</button>
      </div>
      <div class="form-error" id="createGoalError"></div>
    </div>
  </div>

  <div class="modal-overlay hidden" id="archivedGoalsModal">
    <div class="modal" style="max-width: 720px;">
      <h2 class="modal-title">Archived goals</h2>
      <p class="modal-desc">Done and dropped goals are hidden from the condo grid. Open one to restore or review.</p>
      <div style="display:flex; gap:10px; margin-top: 10px;">
        <button class="ghost-btn" id="archTabDone" onclick="setArchivedTab('done')">Done</button>
        <button class="ghost-btn" id="archTabDropped" onclick="setArchivedTab('dropped')">Dropped</button>
        <div style="flex:1"></div>
        <button class="ghost-btn" onclick="hideArchivedGoalsModal()">Close</button>
      </div>
      <div id="archivedGoalsList" style="margin-top: 12px; max-height: 60vh; overflow:auto;"></div>
    </div>
  </div>

  <div class="modal-overlay hidden" id="attachSessionModal">
    <div class="modal" style="max-width: 520px;">
      <h2 class="modal-title">Attach session to goal</h2>
      <p class="modal-desc">Pick a goal. This moves the session (removes it from any other goal).</p>
      <div class="form-group">
        <label class="form-label">Session</label>
        <div class="session-pill" id="attachSessionPill">‚Äî</div>
      </div>
      <div class="form-group">
        <label class="form-label">Goal</label>
        <div class="goal-picker" id="goalPicker"></div>
      </div>
      <div style="display:flex; gap:10px; margin-top: 10px;">
        <button class="form-btn" onclick="confirmAttachSession()">Attach</button>
        <button class="form-btn" style="background: var(--bg-input); border: 1px solid var(--border);" onclick="hideAttachSessionModal()">Cancel</button>
      </div>
      <div class="form-error" id="attachSessionError"></div>
    </div>
  </div>

  <div class="modal-overlay hidden" id="suggestGoalModal">
    <div class="modal" style="max-width: 560px;">
      <h2 class="modal-title">üè∑Ô∏è Suggest Goal</h2>
      <p class="modal-desc" id="suggestGoalDesc">Analyzing session...</p>
      <div class="form-group">
        <label class="form-label">Session</label>
        <div class="session-pill" id="suggestSessionPill">‚Äî</div>
      </div>
      <div class="form-group" id="suggestGoalLoading" style="text-align: center; padding: 20px;">
        <div class="loading-spinner"></div>
        <p style="color: var(--text-dim); margin-top: 10px;">Analyzing conversation...</p>
      </div>
      <div class="form-group" id="suggestGoalResults" style="display: none;">
        <label class="form-label">Suggested Goals</label>
        <div class="goal-suggestions" id="goalSuggestions"></div>
      </div>
      <div class="form-group" id="suggestNewGoalSection" style="display: none;">
        <label class="form-label">Or create a new goal</label>
        <input type="text" class="form-input" id="suggestNewGoalTitle" placeholder="New goal title...">
        <button class="form-btn" style="margin-top: 8px;" onclick="createGoalFromSuggestion()">Create & Assign</button>
      </div>
      <div style="display:flex; gap:10px; margin-top: 16px;">
        <button class="form-btn" style="background: var(--bg-input); border: 1px solid var(--border);" onclick="hideSuggestGoalModal()">Cancel</button>
        <button class="form-btn" id="skipCategorizationBtn" onclick="hideSuggestGoalModal()">Skip</button>
      </div>
      <div class="form-error" id="suggestGoalError"></div>
    </div>
  </div>

  <div class="modal-overlay hidden" id="organizeWizardModal">
    <div class="modal organize-wizard">
      <div class="wiz-header">
        <div class="wiz-header-left">
          <h2 class="wiz-title">Organize Sessions</h2>
          <div class="wiz-progress-text"><span id="wizardProgress">1 of 41</span> ¬∑ <span id="wizardStats">0 organized</span></div>
        </div>
        <button class="wiz-close" onclick="closeOrganizeWizard()">‚úï</button>
      </div>

      <div class="wiz-progress-bar"><div class="wiz-progress-fill" id="wizardProgressBar"></div></div>

      <div class="wiz-columns" id="wizardContent">
        <div class="wiz-left">
          <div class="wiz-section-label">SESSION</div>
          <div class="wiz-session-card">
            <div class="wiz-session-icon" id="wizardSessionIcon">üí¨</div>
            <div class="wiz-session-name" id="wizardSessionTitle">Session Title</div>
          </div>
          <div class="wiz-session-key" id="wizardSessionKey">agent:main:...</div>

          <div class="wiz-section-label" style="margin-top: 20px;">CONTENT PREVIEW</div>
          <div class="wiz-content-box" id="wizardSummary">Loading session data...</div>
        </div>

        <div class="wiz-right">
          <div class="wiz-section-label">SUGGESTED GOAL</div>
          <div class="wiz-goal-card" id="wizardProposal">
            <div class="wiz-goal-icon">üéØ</div>
            <div class="wiz-goal-info" id="wizardProposedGoal">
              <div class="wiz-goal-name">Analyzing...</div>
              <div class="wiz-goal-reason"></div>
            </div>
          </div>

          <div class="wiz-actions">
            <button class="wiz-btn-accept" id="wizardAcceptBtn" onclick="acceptWizardProposal()">‚úì Accept</button>
            <button class="wiz-btn-skip" onclick="skipWizardSession()">Skip ‚Üí</button>
          </div>

          <button class="wiz-btn-change" onclick="showWizardGoalPicker()">Choose different goal...</button>

          <div class="wiz-picker hidden" id="wizardGoalPicker">
            <div class="wiz-picker-list" id="wizardGoalList"></div>
            <div class="wiz-picker-new">
              <input type="text" class="wiz-picker-input" id="wizardNewGoalTitle" placeholder="Or create new...">
              <button class="wiz-picker-create" onclick="createGoalInWizard()">+</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <header class="mobile-header" id="mobileHeader">
    <button class="menu-btn" id="menuBtn" onclick="toggleSidebar()">‚ò∞</button>
    <button class="back-btn" id="backBtn" onclick="goBack()" style="display: none;">‚Üê</button>
    <span class="mobile-title" id="mobileTitle">ClawCondos</span>
    <div class="mobile-actions">
      
    </div>
  </header>

  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

  <div class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header" onclick="navigateTo('dashboard')">
        <img class="brand-logo" src="/v2/media/clawcondos-logo.png" alt="ClawCondos" />
        <h1>ClawCondos</h1>
      </div>

      <div class="condos-section">
        <div class="section-label">Condos</div>
        <div class="sidebar-tools">
          <div class="auto-archive-setting" title="Auto-archive inactive sessions">
            <span>‚è∞</span>
            <select id="autoArchiveSelect" onchange="setAutoArchiveDays(this.value)">
              <option value="0.01">15m</option>
              <option value="0.042">1h</option>
              <option value="0.25">6h</option>
              <option value="1">1d</option>
              <option value="3">3d</option>
              <option value="never">Off</option>
            </select>
          </div>
          <label class="show-archived-toggle" id="showArchivedToggle" style="display: none;">
            <input type="checkbox" onchange="toggleShowArchived()">
            üì¶
          </label>
          <button class="section-action" id="markAllReadBtn" onclick="markAllSessionsRead()" title="Mark all read" style="display: none;">‚úì</button>
          <button class="section-action" onclick="showCreateGoalModal()" title="New goal">Ôºã</button>
          
          
        </div>
        <div id="sessionsList"></div>
      </div>

      <div class="sidebar-nav">
        <div class="nav-btn" data-route="dashboard" onclick="navigateTo('dashboard')">
          <span class="nav-icon">üìä</span>
          <span>Dashboard</span>
        </div>
        <div class="nav-btn" data-route="apps" onclick="navigateTo('apps')">
          <span class="nav-icon">üì±</span>
          <span>Apps</span>
        </div>
        <div class="nav-btn" data-route="recurring" onclick="navigateTo('recurring')">
          <span class="nav-icon">üîÑ</span>
          <span>Recurring Tasks</span>
        </div>
      </div>

      <div class="sidebar-footer">
        <a href="/control/" class="control-ui-btn" title="Open Clawdbot Control UI">ü§ñ Clawdbot UI</a>
        <div class="connection-status" onclick="showLoginModal()">
          <span class="connection-dot" id="connectionDot" style="background: var(--yellow);"></span>
          <span id="connectionText">Connecting...</span>
          <span style="margin-left: auto; font-size: 10px; color: var(--text-muted);">v2</span>
        </div>
      </div>

      <div class="hidden-panels">
        <div id="goalsList"></div>
        <div id="appsList"></div>
        <div id="agentsList"></div>
      </div>
    </aside>

    <div class="content-area">
      <div class="content-header">
        <button class="back-btn" id="backButton" title="Back" onclick="goBack()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
        </button>
        <nav class="breadcrumbs" id="breadcrumbs"></nav>
        <span style="flex: 1;"></span>
        <div class="global-search">
          <svg class="global-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="text" id="sessionSearchInput" placeholder="Search sessions, goals, apps..." oninput="handleSearchInput(this.value)" onkeydown="handleSearchKeydown(event)">
          <span class="global-search-shortcut">‚åòK</span>
        </div>
        <span style="flex: 1;"></span>
        <div class="header-actions" id="headerActionArea">
          <div class="header-status idle" id="headerStatusIndicator" data-tooltip="Ready" style="display: none;"></div>
          <span class="main-title" id="mainTitle" style="display: none;">Dashboard</span>
          <span class="main-subtitle" id="mainSubtitle" style="display: none;"></span>
          <button class="header-btn" id="headerAction" onclick="headerAction()" style="display: none;">Action</button>
          
        </div>
      </div>

      <div class="content-body">
        <main class="content-main main-content">
          <div class="view active" id="overviewView">
            <div id="overviewArea" class="overview-content">
              <div class="stats-grid" id="statsGrid">
                <div class="stat-card clickable accent-blue" onclick="scrollToSection('sessionsGrid')" title="View sessions">
                  <div class="stat-label">Active Sessions</div>
                  <div class="stat-value" id="statActiveSessions">-</div>
                  <div class="stat-trend" id="statSessionsTrend"></div>
                </div>
                <div class="stat-card clickable accent-yellow" onclick="filterGoalsByStatus('active')" title="View pending goals">
                  <div class="stat-label">Pending Goals</div>
                  <div class="stat-value" id="statPendingGoals">-</div>
                </div>
                <div class="stat-card clickable accent-green" onclick="filterGoalsByStatus('done')" title="View completed goals">
                  <div class="stat-label">Completed</div>
                  <div class="stat-value" id="statCompletedGoals">-</div>
                </div>
                <div class="stat-card clickable accent-red" onclick="showErrorSessions()" title="View sessions with errors">
                  <div class="stat-label">Errors</div>
                  <div class="stat-value stat-error" id="statErrors">-</div>
                </div>
              </div>

              <div class="grid-section" id="goalsSection">
                <div class="grid-header">
                  <div class="grid-title-row">
                    <div class="grid-title">CONDOS OVERVIEW</div>
                    <div class="uncategorized-count" id="uncategorizedCount" onclick="autoCategorize()" title="Sessions not assigned to any goal"></div>
                  </div>
                </div>
                <div class="cards-grid goals-grid" id="goalsGrid"></div>
              </div>

              <div class="grid-section">
                <div class="grid-header">
                  <h2 class="grid-title">üí¨ Sessions</h2>
                  <span class="grid-count" id="sessionCount">0</span>
                  <button class="organize-btn" onclick="openOrganizeWizard()" title="Organize uncategorized sessions one by one">üìÇ Organize</button>
                </div>
                <div class="cards-grid" id="sessionsGrid"></div>
              </div>

              <div class="grid-section">
                <div class="grid-header">
                  <h2 class="grid-title">üöÄ Apps</h2>
                  <span class="grid-count" id="appCount">0</span>
                </div>
                <div class="cards-grid" id="appsGrid"></div>
              </div>

              <div class="grid-section" id="subagentsSection" style="display: none;">
                <div class="grid-header">
                  <h2 class="grid-title">‚ö° Background Tasks</h2>
                  <span class="grid-count" id="taskCount">0</span>
                </div>
                <div class="cards-grid" id="subagentsGrid"></div>
              </div>
            </div>
          </div>

          <div class="view" id="appsView">
            <div class="grid" id="appsViewGrid"></div>
          </div>

          <div class="view" id="recurringView">
            <div class="grid" id="recurringGrid"></div>
          </div>

          <div class="view" id="agentsView">
            <div class="agents-shell">
              <aside class="agents-left">
                <div class="agents-left-header">
                  <div class="agents-left-title">Agents</div>
                  <div class="agents-left-sub" id="agentsLeftSub">‚Äî</div>
                </div>
                <div class="agents-list" id="agentsListColumn"></div>
              </aside>
              <section class="agents-main">
                <div class="agents-main-header">
                  <div class="agents-main-title" id="agentsMainTitle">Select an agent</div>
                  <div class="agents-main-meta" id="agentsMainMeta"></div>
                </div>
                <div class="agents-main-body" id="agentsMainBody"></div>
              </section>
            </div>
          </div>

          <div class="view" id="condoView">
            <div class="condo-shell">
              <section class="condo-hero">
                <div class="condo-hero-top" style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
                  <div>
                    <div class="condo-hero-title" id="condoHeroTitle">Condo</div>
                    <div class="condo-hero-sub" id="condoHeroSub">
                      <span class="condo-pill" id="condoPillHealth">Healthy</span>
                      <span class="condo-pill" id="condoPillOwner">Owner: ‚Äî</span>
                      <span class="condo-pill">Last updated: <b id="condoLastUpdated">‚Äî</b></span>
                    </div>
                  </div>
                  <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
                    <button class="ghost-btn" onclick="showArchivedGoalsModal()">Archived</button>
                    <button class="ghost-btn" onclick="openNewGoal(state.currentCondoId)">Ôºã New goal</button>
                  </div>
                </div>
                <div class="condo-hero-stats">
                  <div class="condo-stat"><div class="k">Active goals</div><div class="v"><span id="condoStatActive">0</span> <small>/ <span id="condoStatTotal">0</span></small></div></div>
                  <div class="condo-stat"><div class="k">In progress</div><div class="v"><span id="condoStatDoing">0</span> <small>now</small></div></div>
                  <div class="condo-stat"><div class="k">Blocked</div><div class="v"><span id="condoStatBlocked">0</span> <small>needs input</small></div></div>
                  <div class="condo-stat"><div class="k">Dropped</div><div class="v"><span id="condoStatDropped">0</span> <small>hidden</small></div></div>
                </div>
              </section>

              <section class="condo-goals-grid" id="condoGoalGrid"></section>

              <section class="condo-sessions" style="display:none">
                <div class="grid-header"><div class="grid-title">SESSIONS</div></div>
                <div class="cards-grid" id="condoSessionsList"></div>
              </section>
            </div>
          </div>

          <div class="view" id="goalView">
            <div class="goal-shell-v2" id="goalShell">
              <section class="goal-chat" id="goalChatPanel">
                <div class="goal-chat-header">
                  <div style="display:flex; gap:10px; align-items:baseline; min-width:0;">
                    <div>Chat</div>
                    <div class="goal-chat-meta" id="goalChatMeta" style="min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">‚Äî</div>
                  </div>
                  <div style="display:flex; gap:8px; align-items:center;">
                    <button class="ghost-btn" id="goalNewSessionBtn" onclick="openNewSession(state.currentCondoId, state.currentGoalOpenId)">Ôºã New</button>
                    <button class="ghost-btn" id="goalAttachBtn" onclick="showAttachSessionModal(null)">‚õì</button>
                    <button class="ghost-btn" id="goalOpenBtn" onclick="openGoalChatInFull()">Open ‚Üí</button>
                  </div>
                </div>

                <div class="goal-chat-body" style="padding:0; display:flex; flex-direction:column; min-height:0;">
                  <div id="goalKickoffOverlay" style="display:none; padding:18px 14px; border-bottom:1px solid rgba(255,255,255,0.06);">
                    <div style="font-weight:600; margin-bottom:6px;">This goal hasn‚Äôt started yet</div>
                    <div style="color: var(--text-dim); font-size:0.9rem; margin-bottom:12px;">Kick off to create the first session, send the goal context, and begin execution.</div>
                    <button class="ghost-btn" style="border-color: rgba(96,165,250,.55);" onclick="kickOffGoal()">Kick Off Goal</button>
                  </div>
                  <div class="chat-messages" id="goal_chatMessages"></div>
                  <button class="jump-to-latest" id="goal_jumpToLatest" title="Jump to latest" style="right: 14px; bottom: 92px;">
                    <span class="jump-to-latest-label">Jump to latest</span>
                    <span class="jump-to-latest-count" id="goal_jumpToLatestCount" style="display:none;">0</span>
                  </button>

                  <div class="drop-overlay" id="goal_dropOverlay">
                    <div class="drop-overlay-content">
                      <div class="drop-overlay-icon">üìé</div>
                      <div class="drop-overlay-text">Drop files here</div>
                      <div class="drop-overlay-hint">Images and audio supported</div>
                    </div>
                  </div>
                </div>

                <div id="composerMountGoal"></div>
              </section>

              <section class="goal-right" id="goalRightPanel">
                <div class="goal-right-header">
                  <div>
                    <div class="goal-right-title" id="goalHeroTitle">Goal</div>
                    <div class="goal-right-meta">
                      <span id="goalCondoName">Condo</span>
                      <span>Last updated: <b id="goalLastUpdated">‚Äî</b></span>
                    </div>
                  </div>
                  <div class="goal-right-actions">
                    <button class="ghost-btn" id="goalMarkDoneBtn" onclick="toggleGoalDone()">Mark done</button>
                    <button class="ghost-btn danger" onclick="promptDropGoal()">Drop</button>
                  </div>
                </div>

                <div class="goal-def">
                  <div class="goal-def-display" id="goalDefDisplay" onclick="startGoalDefEdit()">Click to add a definition‚Ä¶ <small>(click to edit)</small></div>
                  <div class="goal-def-edit" id="goalDefEdit">
                    <textarea id="goalDefTA" rows="6"></textarea>
                    <div class="goal-def-actions">
                      <button class="ghost-btn" onclick="saveGoalDefEdit()">Save</button>
                      <button class="ghost-btn" onclick="cancelGoalDefEdit()">Cancel</button>
                    </div>
                  </div>
                </div>

                <div class="goal-tabs">
                  <div class="goal-tab active" id="goalTabTasks" onclick="setGoalTab('tasks')">Tasks</div>
                  <div class="goal-tab" id="goalTabFiles" onclick="setGoalTab('files')">Files</div>
                </div>

                <div class="goal-pane" id="goalPane"></div>
              </section>
            </div>
          </div>

          <div class="view" id="chatView">
            <div id="chatArea" class="chat-shell">
              <div class="session-info" id="sessionInfo">
                <span class="session-info-item">üìç <span id="sessionKeyDisplay">-</span></span>
                <span class="session-info-item">ü§ñ <span class="session-badge" id="sessionModel">-</span></span>
                <span class="session-info-item">üìä <span id="sessionTokens">-</span> tokens</span>
                <span class="session-info-spacer"></span>
                <button class="export-btn" onclick="exportChatAsMarkdown()" title="Export as Markdown">
                  <svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                  Export
                </button>
              </div>
              <div class="chat-messages" id="chatMessages"></div>
              <button class="jump-to-latest" id="jumpToLatest" title="Jump to latest">
                <span class="jump-to-latest-label">Jump to latest</span>
                <span class="jump-to-latest-count" id="jumpToLatestCount" style="display:none;">0</span>
              </button>

              <div class="drop-overlay" id="dropOverlay">
                <div class="drop-overlay-content">
                  <div class="drop-overlay-icon">üìé</div>
                  <div class="drop-overlay-text">Drop files here</div>
                  <div class="drop-overlay-hint">Images and audio supported</div>
                </div>
              </div>

              <div class="reconnect-overlay" id="reconnectOverlay">
                <div class="spinner"></div>
                <div class="reconnect-text">Reconnecting...</div>
                <div class="reconnect-attempt" id="reconnectAttempt">Attempt 1</div>
              </div>
              <div id="composerMountChat"></div>
            </div>
          </div>

          <div class="view" id="newSessionView">
            <div class="form-page">
              <div class="detail-section">
                <div class="detail-label">Agent</div>
                <div class="agent-chip-row" id="newSessionAgents"></div>
              </div>

              <div class="detail-section">
                <div class="detail-label">Goal (optional)</div>
                <select id="newSessionGoal" class="form-input"></select>
              </div>

              <div class="detail-section">
                <div class="detail-label">Initial Message</div>
                <textarea id="newSessionMessage" class="form-input" style="min-height: 110px;" placeholder="What do you want to work on?"></textarea>
              </div>

              <div class="form-actions">
                <button class="btn btn-success" onclick="submitNewSession()">üöÄ Start Session</button>
                <button class="btn btn-secondary" onclick="goBack()">Cancel</button>
              </div>
            </div>
          </div>

          <div class="view" id="newGoalView">
            <div class="form-page">
              <div class="detail-section">
                <div class="detail-label">Goal Title</div>
                <input type="text" id="newGoalTitle" class="form-input" placeholder="e.g., Implement user authentication">
              </div>

              <div class="detail-section">
                <div class="detail-label">Description (optional)</div>
                <textarea id="newGoalDescription" class="form-input" style="min-height: 80px;" placeholder="What needs to be accomplished?"></textarea>
              </div>

              <div class="detail-section">
                <div class="detail-label">Start session immediately?</div>
                <div class="radio-row">
                  <label class="radio-card">
                    <input type="radio" name="startGoalSession" value="yes" checked>
                    <span>Yes, start working</span>
                  </label>
                  <label class="radio-card">
                    <input type="radio" name="startGoalSession" value="no">
                    <span>No, just create goal</span>
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button class="btn btn-primary" onclick="submitNewGoal()">‚úì Create Goal</button>
                <button class="btn btn-secondary" onclick="goBack()">Cancel</button>
              </div>
            </div>
          </div>
        </main>

        <aside class="detail-panel">
          <div class="detail-panel-inner">
            <div class="detail-content" id="detailPanelContent"></div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script src="/clawcondos-lib/config.js"></script>
  <script>
    // Login modal is managed by app.js.
  </script>
  <!-- Load shared modules BEFORE app.js so it can mount them dynamically -->
  <script src="/js/media-upload.js"></script>
  <script src="/js/voice-recorder.js"></script>
  <script src="/v2/app.js"></script>
</body>
</html>
